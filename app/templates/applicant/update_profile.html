{% extends "base.html" %}

{% block title %}Update Profile - Media Unit{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 py-8">
    <div class="bg-white rounded-lg shadow-lg p-8">
        <h1 class="text-4xl font-bold text-red-600 mb-2">Update Your Profile</h1>
        <p class="text-gray-600 mb-8">Keep your information and skills up to date</p>

        <form method="POST" enctype="multipart/form-data" class="space-y-8">
            <!-- Personal Information -->
            <div class="border-b pb-8">
                <h3 class="text-xl font-bold text-gray-800 mb-6">üìù Personal Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-gray-700 font-bold mb-2">Full Name</label>
                        <input type="text" value="{{ applicant.full_name }}" disabled class="w-full px-4 py-2 bg-gray-100 text-gray-600 rounded-lg">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-bold mb-2">Email</label>
                        <input type="email" value="{{ applicant.email }}" disabled class="w-full px-4 py-2 bg-gray-100 text-gray-600 rounded-lg">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-bold mb-2">Occupation</label>
                        <input type="text" name="occupation" value="{{ applicant.occupation or '' }}" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500">
                    </div>
                    <div>
                        <label class="block text-gray-700 font-bold mb-2">Phone</label>
                        <input type="tel" value="{{ applicant.phone or '' }}" disabled class="w-full px-4 py-2 bg-gray-100 text-gray-600 rounded-lg">
                    </div>
                </div>
            </div>

            <!-- Professional Background & Availability -->
            <div class="border-b pb-8">
                <h3 class="text-xl font-bold text-gray-800 mb-6">üíº Background & Availability</h3>
                <div class="space-y-6">
                    <div>
                        <label class="block text-gray-700 font-bold mb-2">Professional Background</label>
                        <textarea name="professional_background" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500">{{ applicant.professional_background or '' }}</textarea>
                    </div>
                    <div>
                        <label class="block text-gray-700 font-bold mb-2">Availability</label>
                        <textarea name="availability" rows="3" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-red-500">{{ applicant.availability or '' }}</textarea>
                    </div>
                </div>
            </div>

            <!-- Skills Assessment -->
            <div class="border-b pb-8">
                <h3 class="text-xl font-bold text-gray-800 mb-6">üéØ Skill Assessment</h3>
                <p class="text-gray-600 mb-4">Rate your proficiency on a scale of 1-5 (1=Beginner, 5=Expert)</p>
                
                <div class="space-y-4">
                    {% if applicant.skills %}
                        {% for skill in applicant.skills %}
                        <div class="flex items-center justify-between bg-gray-50 p-4 rounded">
                            <label class="text-gray-700 font-medium">{{ skill.skill_name }}</label>
                            <div class="flex space-x-2">
                                {% for i in range(1, 6) %}
                                <label class="cursor-pointer">
                                    <input type="radio" name="skill_{{ skill.skill_name }}" value="{{ i }}" {% if i == skill.rating %}checked{% endif %} class="hidden">
                                    <span class="inline-block w-8 h-8 border-2 {% if i == skill.rating %}border-red-600 bg-red-600 text-white{% else %}border-gray-300{% endif %} rounded text-center leading-6 hover:border-red-500">{{ i }}</span>
                                </label>
                                {% endfor %}
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                    <p class="text-gray-600">No skills to update yet</p>
                    {% endif %}
                </div>
            </div>

            <!-- Profile Picture -->
            <div class="border-b pb-8">
                <h3 class="text-xl font-bold text-gray-800 mb-6">üì∑ Profile Picture</h3>
                
                {% if applicant.profile_picture %}
                <div class="mb-6">
                    <p class="text-gray-700 font-medium mb-3">Current Profile Picture:</p>
                    <img src="{{ url_for('media.download_file', file_path=applicant.profile_picture) }}" alt="Profile" class="w-32 h-32 rounded-lg object-cover border-2 border-gray-300">
                </div>
                {% endif %}
                
                <div class="border-2 border-dashed border-red-300 rounded-lg p-8 text-center hover:border-red-500 transition cursor-pointer bg-red-50">
                    <input type="file" name="profile_picture" accept="image/*" class="hidden" id="profilePictureInput">
                    <label for="profilePictureInput" class="cursor-pointer block">
                        <div class="text-4xl mb-2">üì∑</div>
                        <p class="text-gray-700 font-medium">Click to upload or drag and drop</p>
                        <p class="text-gray-500 text-sm">JPG, PNG, GIF up to 10MB</p>
                    </label>
                    <p id="profilePictureName" class="text-red-600 text-sm mt-2" style="display:none;"></p>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="flex gap-4">
                <button type="submit" class="flex-1 bg-red-600 text-white py-3 rounded-lg hover:bg-red-700 font-bold text-lg">
                    Save Changes
                </button>
                <a href="{{ url_for('applicant.applicant_dashboard') }}" class="flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-400 font-bold text-lg text-center">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>

<script>
document.getElementById('profilePictureInput').addEventListener('change', function() {
    const fileName = this.files[0]?.name || '';
    const nameDisplay = document.getElementById('profilePictureName');
    if (fileName) {
        nameDisplay.textContent = `‚úì Selected: ${fileName}`;
        nameDisplay.style.display = 'block';
    }
});
</script>
{% endblock %}
